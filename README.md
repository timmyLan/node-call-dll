# koa-react API :blush:

## api说明文档

### 状态码说明
* 200 - 请求成功状态码
* 402 - 丢失参数状态码
* 500 - 调用dll出错/服务器出错

### 获取注册表信息
#### 请求url:
* ```/reg```

#### 请求方法:
* POST

#### 返回
* 注册表信息

---

### 加载动态库
#### 请求url:
* ```/load```

#### 请求方法:
* POST

#### 返回
* 成功加载动态库数目

---

### 检测设备数量
#### 请求url:
* ```/open```

#### 请求方法:
* POST

#### 参数:
| 参数名 | 必填 | 类型 | 说明      |
|----------|------|--------|----------------|
| index  | y    | int  | Index索引 |

#### 返回
* 设备数量

---

### 链接设备
#### 请求url:
* ```/connect```

#### 请求方法:
* POST

#### 参数:
| 参数名     | 必填 | 类型 | 说明            |
|----------|------|--------|----------------|
| index      | y    | int  | Index索引       |
| protocolID | n    | int  | protocolID默认6 |
| flags      | n    | int  | Flags默认0      |
| baudRate   | n    | int  | BaudRate500000  |

#### 返回
* 0成功
* 非0失败

---

### IO配置设备
#### 请求url:
* ```/ioctl```

#### 请求方法:
* POST

#### 参数:
|   参数名   | 必填 | 类型 |                 说明                |
|------------|------|------|-------------------------------------|
| index      | y    | int  | Index索引                           |
| pChannelID | n    | int  | pChannelID连接指定设备后的ChannelID |
| ioctlID    | n    | int  | ioctlID默认2                        |

#### 返回
* 0成功
* 非0失败

---

### 配置过虑器
#### 请求url:
* ```/startMsgFilter```

#### 请求方法:
* POST

#### 参数:
|   参数名   | 必填 | 类型 |                 说明                |
|------------|------|------|-------------------------------------|
| index      | y    | int  | Index索引                           |
| pChannelID | n    | int  | pChannelID连接指定设备后的ChannelID |
| filterType | n    | int  | filterType默认3                     |

#### 返回
* 0成功
* 非0失败

---

### 发送
#### 请求url:
* ```/writeMsgs```

#### 请求方法:
* POST

#### 参数:
|   参数名   | 必填 |  类型  |                 说明                |
|------------|------|--------|-------------------------------------|
| index      | y    | int    | Index索引                           |
| pChannelID | n    | int    | pChannelID连接指定设备后的ChannelID |
| writeMsgs  | y    | string | Message要发送的字符串               |
| timeout    | n    | int    | Timeout默认1000                     |

#### 返回
* 0成功
* 非0失败

---

### 接收
#### 请求url:
* ```/readMsgs```

#### 请求方法:
* POST

#### 参数:
|    参数名    | 必填 |  类型  |                 说明                |
|--------------|------|--------|-------------------------------------|
| index        | y    | int    | Index索引                           |
| pChannelID   | n    | int    | pChannelID连接指定设备后的ChannelID |
| msg_ReadMsgs | y    | string | Message要接收的字符串               |
| pNumMsgs     | n    | int    | pNumMsgs接收字符串的数量默认为null  |
| timeout      | n    | int    | Timeout默认1000                     |

#### 返回
* 0成功
* 非0失败

---

### 删除过虑器
#### 请求url:
* ```/stopMsgFilter```

#### 请求方法:
* POST

#### 参数:
|   参数名   | 必填 | 类型 |                 说明                |
|------------|------|------|-------------------------------------|
| index      | y    | int  | Index索引                           |
| pChannelID | n    | int  | pChannelID连接指定设备后的ChannelID |
| pFilterID  | n    | int  | pFilterID要取消的FilterID           |

#### 返回
* 0成功
* 非0失败

---

### 断开指定连接
#### 请求url:
* ```/disconnect```

#### 请求方法:
* POST

#### 参数:
|   参数名   | 必填 | 类型 |                 说明                |
|------------|------|------|-------------------------------------|
| index      | y    | int  | Index索引                           |
| pChannelID | n    | int  | pChannelID连接指定设备后的ChannelID |

#### 返回
* 0成功
* 非0失败

---

### 关闭设备
#### 请求url:
* ```/passThru_Close```

#### 请求方法:
* POST

#### 参数:
| 参数名 | 必填 | 类型 |    说明   |
|--------|------|------|-----------|
| index  | y    | int  | Index索引 |

#### 返回
* 设备数量

---

### 释放空间
#### 请求url:
* ```/passThru_Delete```

#### 请求方法:
* POST

#### 返回
* void

---

### 统一操作(获取注册表信息&加载动态库)
#### 请求url:
* ```/ready```

#### 请求方法:
* POST

---

### 统一操作(链接设备&IO配置设备&配置过虑器)
#### 请求url:
* ```/start```

#### 请求方法:
* POST

#### 参数:
| 参数名 | 必填 | 类型 |    说明   |
|--------|------|------|-----------|
| index  | y    | int  | Index索引 |


---

### 统一操作(删除过虑器&断开指定连接&关闭指定设备)
#### 请求url:
* ```/end```

#### 请求方法:
* POST

#### 参数:
| 参数名 | 必填 | 类型 |    说明   |
|--------|------|------|-----------|
| index  | y    | int  | Index索引 |


---

### 计算公式为:n*(n-1) while n>1

`例如输入max为35,结果应返回6399018521010896896`

#### 请求url:
* ```/result```

#### 请求方法:
* POST

#### 参数:
| 参数名 | 必填 | 类型 |  说明 |
|--------|------|------|-------|
| max    | y    | int  | max值 |


---

### 计算公式为 first+second

#### 请求url:
* ```/add```

#### 请求方法:
* POST

#### 参数:
| 参数名 | 必填 | 类型 |    说明    |
|--------|------|------|------------|
| first  | y    | int  | 第一个数值 |
| second | y    | int  | 第二个数值 |


---

### 计算公式为 first-second

#### 请求url:
* ```/minus```

#### 请求方法:
* POST

#### 参数:
| 参数名 | 必填 | 类型 |    说明    |
|--------|------|------|------------|
| first  | y    | int  | 第一个数值 |
| second | y    | int  | 第二个数值 |


---

### 计算公式为 first*second

#### 请求url:
* ```/multiply```

#### 请求方法:
* POST

#### 参数:
| 参数名 | 必填 | 类型 |    说明    |
|--------|------|------|------------|
| first  | y    | int  | 第一个数值 |
| second | y    | int  | 第二个数值 |


---

### 对比first & second

#### 请求url:
* ```/compare```

#### 请求方法:
* POST

#### 参数:
| 参数名 | 必填 | 类型 |    说明    |
|--------|------|------|------------|
| first  | y    | int  | 第一个数值 |
| second | y    | int  | 第二个数值 |

#### 返回
* 大于
* 小于
* 等于

---
